<div id="pdf_viewer" class="hidden">
    <button id="pdf_viewer_close" class="pdf_viewer_close">&times;</button>
    <button id="pdf_viewer_prev" class="pdf_viewer_arrow pdf_viewer_left">&lt;</button>
    <div id="pdf_viewer_container">
        {% for image in images %}
        <img src="{{ image }}" class="pdf_viewer_image {% if forloop.first %}active{% endif %}" alt="Page {{ forloop.counter }}">
        {% endfor %}
    </div>
    <button id="pdf_viewer_next" class="pdf_viewer_arrow pdf_viewer_right">&gt;</button>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const viewer = document.getElementById("pdf_viewer");
        const closeButton = document.getElementById("pdf_viewer_close");
        const nextButton = document.getElementById("pdf_viewer_next");
        const prevButton = document.getElementById("pdf_viewer_prev");
        let images = document.querySelectorAll(".pdf_viewer_image");
        let currentIndex = 0;

        function showImage(index) {
            images.forEach((img, i) => {
                img.classList.toggle("active", i === index);
            });
        }

        function openViewer() {
            viewer.classList.remove("hidden");
            document.body.classList.add("no-scroll");
        }

        function closeViewer() {
            viewer.classList.add("hidden");
            document.body.classList.remove("no-scroll");
        }

        nextButton.addEventListener("click", function () {
            currentIndex = (currentIndex + 1) % images.length;
            showImage(currentIndex);
        });

        prevButton.addEventListener("click", function () {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            showImage(currentIndex);
        });

        closeButton.addEventListener("click", closeViewer);

        // Автооткрытие при загрузке (если нужно)
        openViewer();
    });
</script>